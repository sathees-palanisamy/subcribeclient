{"ast":null,"code":"var _jsxFileName = \"/Users/satheeskumarpalanisamy/service/careerservice/client/pages/edit.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport buildClient from '../api/build-client';\nimport axios from \"axios\";\n\nconst EditSubCribe = ({\n  currentUser\n}) => {\n  const {\n    0: depList,\n    1: SetDepList\n  } = useState([]);\n  const {\n    0: newDepList,\n    1: SetNewDepList\n  } = useState([]);\n  const {\n    0: checkBoxList,\n    1: setCheckBoxList\n  } = useState([]);\n  const {\n    0: subId,\n    1: setSubID\n  } = useState('');\n  const curDepList = [\"Information Technology\", \"Textile\", \"Automobile\", \"Medical Science\", \"Marine\", \"Business Management\", \"Agriculture & Biology\", \"Electrical & Electronics\", \"Chemical\", \"Communication\", \"Civil\", \"Mech & Manufacturing\", \"Entertainment\", \"Aerospace\", \"Physics\", \"Maths\", \"Arts and Hotel\"];\n\n  const handleCheckboxClick = (event, checkBoxDepart) => {\n    let newCheckObj = [...checkBoxList];\n    newCheckObj.map((singleCObj, index) => {\n      if (singleCObj.department === checkBoxDepart.department) {\n        let newState = newCheckObj[index].subcribed;\n        newCheckObj[index].subcribed = !newState;\n\n        if (newCheckObj[index].subcribed === true) {\n          let newdepList = [...newDepList, newCheckObj[index].department];\n          SetNewDepList([...newdepList]);\n        } else {\n          const newlist2 = depList.map(dep1 => dep1 !== checkBoxDepart.department);\n        }\n      }\n    });\n    setCheckBoxList([...newCheckObj]);\n  };\n\n  const submitHandler = event => {\n    event.preventDefault();\n\n    try {\n      const response = axios.put(\"/api/updatesubcribe\", {\n        id: subId,\n        depart: [...newDepList]\n      });\n      console.log('response.status:' + response.status);\n    } catch (err) {\n      console.log('err:' + err);\n    }\n  };\n\n  useEffect(() => {\n    var newList1 = [];\n    axios.get(\"/api/subcribe\").then(response => {\n      setSubID(response.data.id);\n      SetDepList([...response.data]);\n\n      if (newDepList.length === 0) {\n        SetNewDepList([...response.data]);\n        newList1 = [...response.data];\n      } else {\n        newList1 = [...newDepList];\n      }\n\n      const checkBoxInitObj = curDepList.map((sinDep, index) => {\n        let subcribedValue = false;\n\n        for (let j = 0; j < newList1.length; j++) {\n          if (newList1[j] === sinDep) {\n            subcribedValue = true;\n          }\n        }\n\n        return {\n          \"department\": sinDep,\n          \"subcribed\": subcribedValue\n        };\n      });\n      setCheckBoxList([...checkBoxInitObj]);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, []);\n  const depRenderList = checkBoxList.map((sinDep, index) => {\n    return __jsx(\"div\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 2\n      }\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      checked: sinDep.subcribed,\n      onChange: e => handleCheckboxClick(e, sinDep),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 4\n      }\n    }), __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 4\n      }\n    }, \" \"), __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 18\n      }\n    }, sinDep.department));\n  });\n\n  const finalRenderDep = __jsx(\"div\", {\n    className: \"p-d-flex p-flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 26\n    }\n  }, depRenderList);\n\n  return currentUser ? __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, \"Subcribed Department List\"), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, finalRenderDep), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }), __jsx(\"button\", {\n    onClick: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 4\n    }\n  }, \"Submit\")) : __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }\n  }, \"You are NOT signed in\");\n};\n\nEditSubCribe.getInitialProps = async context => {\n  console.log('Edit Page!');\n  const client = buildClient(context);\n  const {\n    data\n  } = await client.get('/api/users/currentuser');\n  console.log('data:' + data.currentUser);\n  return data;\n};\n\nexport default EditSubCribe;","map":{"version":3,"sources":["/Users/satheeskumarpalanisamy/service/careerservice/client/pages/edit.js"],"names":["useEffect","useState","buildClient","axios","EditSubCribe","currentUser","depList","SetDepList","newDepList","SetNewDepList","checkBoxList","setCheckBoxList","subId","setSubID","curDepList","handleCheckboxClick","event","checkBoxDepart","newCheckObj","map","singleCObj","index","department","newState","subcribed","newdepList","newlist2","dep1","submitHandler","preventDefault","response","put","id","depart","console","log","status","err","newList1","get","then","data","length","checkBoxInitObj","sinDep","subcribedValue","j","catch","error","depRenderList","e","finalRenderDep","getInitialProps","context","client"],"mappings":"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","sourcesContent":["import { useEffect,useState } from 'react';\nimport buildClient from '../api/build-client';\nimport axios from \"axios\";\n\nconst EditSubCribe = ({ currentUser }) => {\n\nconst [depList, SetDepList] = useState([]);\nconst [newDepList, SetNewDepList] = useState([]);\nconst [checkBoxList,setCheckBoxList] = useState([]);\nconst [subId,setSubID] = useState('');\nconst curDepList = [\n      \"Information Technology\",\n      \"Textile\",\n      \"Automobile\",\n      \"Medical Science\",\n      \"Marine\",\n      \"Business Management\",\n      \"Agriculture & Biology\",\n      \"Electrical & Electronics\",\n      \"Chemical\",\n      \"Communication\",\n      \"Civil\",\n      \"Mech & Manufacturing\",\n      \"Entertainment\",\n      \"Aerospace\",\n      \"Physics\",\n      \"Maths\",\n      \"Arts and Hotel\"\n];\n\n\n\nconst handleCheckboxClick = (event,checkBoxDepart) => {\n\n \n  let newCheckObj = [...checkBoxList];\n\n  newCheckObj.map((singleCObj,index) => { \n\n    if (singleCObj.department === checkBoxDepart.department) {\n      let newState = newCheckObj[index].subcribed;\n      newCheckObj[index].subcribed = !newState;\n      if (newCheckObj[index].subcribed === true ) {\n        let newdepList = [...newDepList,newCheckObj[index].department];\n        SetNewDepList([...newdepList]);\n      } else {\n        const newlist2 = depList.map((dep1) => dep1!== checkBoxDepart.department)\n      }\n    }\n  \n  });\n\n  setCheckBoxList([...newCheckObj]);\n\n}\n\nconst submitHandler = (event) => {\n  event.preventDefault();\n  try {\n    const response = axios.put(\"/api/updatesubcribe\", {\n      id: subId,\n      depart: [...newDepList],\n    });\n    console.log('response.status:'+ response.status);\n\n  } catch (err) {\n    console.log('err:'+ err);\n  }\n\n}\n\n\n useEffect( () => {\n   var newList1 = [];\n   axios.get(\"/api/subcribe\")\n    .then((response) => {\n    setSubID(response.data.id);\n    SetDepList([...response.data]);\n    if (newDepList.length === 0) {\n      SetNewDepList([...response.data]);\n      newList1 = [...response.data];\n    } else {\n      newList1 = [...newDepList];\n    }\n\n    const checkBoxInitObj = curDepList.map((sinDep,index) => {\n      let subcribedValue = false\n    \n      for (let j=0; j < newList1.length;j++) {\n        if (newList1[j] === sinDep) {\n          subcribedValue = true;\n        }\n      }\n    \n      return {\n        \"department\": sinDep,\n        \"subcribed\": subcribedValue\n      }\n    })\n     setCheckBoxList([...checkBoxInitObj]);\n   \n\n  })\n    .catch((error) => {\n      console.log(error)\n    }); \n    \n\n },[]);\n\n\n const depRenderList = checkBoxList.map((sinDep,index) => {\n \n  return(\n <div key={index}> \n   <input type=\"checkbox\" checked={sinDep.subcribed} onChange={(e) => handleCheckboxClick(e,sinDep)}></input>\n   <span> </span><label>{sinDep.department}</label>\n </div> \n  );\n });\n\n\n const finalRenderDep =  <div className=\"p-d-flex p-flex-column\">\n   {depRenderList}\n </div>\n\n  return currentUser ? (\n    <div className=\"container\">\n      <br></br>\n    <h2>Subcribed Department List</h2>\n    <br></br>\n    <div>\n    {finalRenderDep}\n    </div>\n    <br></br>\n   <button onClick={submitHandler}>Submit</button>\n    </div>\n \n    \n  ) : (\n    <h1>You are NOT signed in</h1>\n  );\n};\n\nEditSubCribe.getInitialProps = async context => {\n  console.log('Edit Page!');\n  const client = buildClient(context);\n  const { data } = await client.get('/api/users/currentuser');\n  console.log('data:' + data.currentUser);\n\n  return data;\n};\n\nexport default EditSubCribe;\n\n"]},"metadata":{},"sourceType":"module"}